#########################################
# Astral Planes - Astral Thread Actions #
#########################################

@ASTRAL_ACTION_10_YEARS_COOLDOWN = 3600
@ASTRAL_ACTION_5_YEARS_COOLDOWN = 1800
@ASTRAL_ACTION_2_HALF_YEARS_COOLDOWN = 900
@ASTRAL_ACTION_YEAR_COOLDOWN = 360


action_summon_dimensional_fleet = {
	sound = action_activation_phase_fleet
	unlock_threshold = 5

	activation_cost = {
		cost = {
			astral_threads = 1750
		}
	}

	cooldown = @ASTRAL_ACTION_5_YEARS_COOLDOWN
	picture = GFX_astral_action_summon_dimensional_fleet

	allow_unlock = {
		has_technology = tech_psionic_theory
	}

	effect = {
		custom_tooltip = "action_summon_dimensional_fleet_tooltip"

		create_fleet = {
			name = "NAME_Dimensional_Fleet"
			settings = {
				can_upgrade = no
				can_change_composition = no
				can_change_leader = no
				uses_naval_capacity = no
				spawn_debris = no
			}
			effect = {
				set_owner = root
				while = {
					count = value:num_dimensional_fleet_big_ships
					create_ship = {
						fleet_cache_recalc = no #skip fleet cache recalculation on each individual ship being added. Effect create_fleet will recalculate everything once after all the ships are in.
						name = "NAME_Astral_Avatar"
						design = "NAME_Astral_Avatar"
						upgradable = no
						graphical_culture = "extra_dimensional_01"
					}
				}
				while = {
					count = value:num_dimensional_fleet_small_ships
					create_ship = {
						fleet_cache_recalc = no #skip fleet cache recalculation on each individual ship being added. Effect create_fleet will recalculate everything once after all the ships are in.
						name = "NAME_Astral_Avatar_Small"
						design = "NAME_Astral_Avatar_Small"
						upgradable = no
						graphical_culture = "extra_dimensional_01"
					}
				}
				set_location = root.capital_scope
				set_fleet_flag = dimensional_fleet
			}
		}
		add_research_option = tech_extradimensional_weapon_1

		hidden_effect = {
			last_created_fleet = {
				fleet_event = {
					id = astral_planes.1000
					days = @ASTRAL_ACTION_5_YEARS_COOLDOWN
				}
			}
		}
	}

	ai_weight = {
		weight = 10
		modifier = {
			factor = 10
			is_militarist = yes
		}
		modifier = {
			factor = 100
			is_at_war = yes
		}
	}
}
