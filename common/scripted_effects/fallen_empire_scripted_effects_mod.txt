add_awakened_fallen_empire_resources_mod = {
	# Changing country type resets resources, so give them full stores
	add_resource = { minerals = 1000000 }
	add_resource = { energy = 1000000 }
	add_resource = { food = 1000000 }
	add_resource = { alloys = 200000 }
	add_resource = { consumer_goods = 200000 }
	add_resource = { alloys = 200000 }
	add_resource = { exotic_gases = 10000 }
	add_resource = { volatile_motes = 10000 }
	add_resource = { rare_crystals = 10000 }
	add_resource = { sr_dark_matter = 10000 }
	add_resource = { sr_living_metal = 10000 }
	add_resource = { nanites = 10000 }
	add_resource = { sr_zro = 10000 }
	add_resource = { minor_artifacts = 500000000 }
}

create_fallen_empire_reinforcements_mod = {
	if = {
		limit = {
			owner = { has_ethic = ethic_fanatic_xenophile}
		}
		create_fallen_empire_fleet_mod = {
			BIGSHIP_NUM = value:get_fallen_empire_titan_enforce_num
			MEDIUMSHIP_NUM = value:get_fallen_empire_battlecruise_num
			SMALLSHIP_NUM = value:get_fallen_empire_escort_num
			DESIGN_BIGSHIP = "NAME_Keeper"
			DESIGN_MEDIUMSHIP = "NAME_Custodian"
			DESIGN_SMALLSHIP = "NAME_Overseer"
		}		
	}
	if = {
		limit = { 
			owner = { has_ethic = ethic_fanatic_materialist }
		}
		create_fallen_empire_fleet_mod = {
			BIGSHIP_NUM = value:get_fallen_empire_titan_enforce_num
			MEDIUMSHIP_NUM = value:get_fallen_empire_battlecruise_num
			SMALLSHIP_NUM = value:get_fallen_empire_escort_num
			DESIGN_BIGSHIP = "NAME_Savant"
			DESIGN_MEDIUMSHIP = "NAME_Custodian"
			DESIGN_SMALLSHIP = "NAME_Sage"
		}		
	}
	if = {
		limit = { 
			owner = { has_ethic = ethic_fanatic_spiritualist }
		}
		create_fallen_empire_fleet_mod = {
			BIGSHIP_NUM = value:get_fallen_empire_titan_enforce_num
			MEDIUMSHIP_NUM = value:get_fallen_empire_battlecruise_num
			SMALLSHIP_NUM = value:get_fallen_empire_escort_num
			DESIGN_BIGSHIP = "NAME_Eternal"
			DESIGN_MEDIUMSHIP = "NAME_Avatar"
			DESIGN_SMALLSHIP = "NAME_Zealot"
		}
	}
	if = {
		limit = {
			owner = { has_ethic = ethic_fanatic_xenophobe}
		}
		create_fallen_empire_fleet_mod = {
			BIGSHIP_NUM = value:get_fallen_empire_titan_enforce_num
			MEDIUMSHIP_NUM = value:get_fallen_empire_battlecruise_num
			SMALLSHIP_NUM = value:get_fallen_empire_escort_num
			DESIGN_BIGSHIP = "NAME_Imperium"
			DESIGN_MEDIUMSHIP = "NAME_Supremacy"
			DESIGN_SMALLSHIP = "NAME_Glory"
		}
	}
	if = {
		limit = {
			OR = {
				owner = { has_country_flag = fallen_empire_hive_war }
				owner = { has_country_flag = fallen_empire_hive_growth }
				owner = { has_country_flag = fallen_empire_hive_control }
			}					
		}
		create_fallen_empire_fleet_mod = {
			BIGSHIP_NUM = value:get_fallen_empire_stinger_num
			MEDIUMSHIP_NUM = value:get_fallen_empire_harbinger_num
			SMALLSHIP_NUM = value:get_fallen_empire_mauler_num
			DESIGN_BIGSHIP = "NAME_HIVE_FE_Large_Stinger"
			DESIGN_MEDIUMSHIP = "NAME_HIVE_FE_Large_Harbinger"
			DESIGN_SMALLSHIP = "NAME_HIVE_FE_Large_Mauler_Picket"
		}
	}

}

create_fallen_empire_fleet_mod = {
	capital_scope = {
		create_fleet = {
			effect = {
				set_owner = prev.owner
				while = {
					count = $BIGSHIP_NUM$ 
					create_ship = {
						name = random
						design = $DESIGN_BIGSHIP$
						graphical_culture = owner
					}
				}
				while = {
					count = $MEDIUMSHIP_NUM$ 
					create_ship = {
						name = random
						design = $DESIGN_MEDIUMSHIP$
						graphical_culture = owner
					}
				}
				while = {
					count = $SMALLSHIP_NUM$ 
					create_ship = {
						name = random
						design = $DESIGN_SMALLSHIP$
						graphical_culture = owner
					}
				}
				random_list = {
					25 = {
						set_location = {
							target = prev
							distance = 30
							angle = random
						}
					}
					25 = {
						set_location = {
							target = prev
							distance = 45
							angle = random
						}
					}
					25 = {
						set_location = {
							target = prev
							distance = 60
							angle = random
						}
					}
					25 = {
						set_location = {
							target = prev
							distance = 75
							angle = random
						}
					}
				}
			}
		}
	}
}


create_fe_home_citadel = {
	spawn_megastructure = {
		type = "mega_shipyard_ruined"
		planet = star
		init_effect = {
			create_ambient_object = {
				type = "large_debris_object"
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = prev
					distance = 20
					angle = 20
				}
			}
		}
	}
	create_starbase = {
		size = "starbase_citadel"

		module = "shipyard"
		module = "shipyard"
		module = "shipyard"
		module = "hangar_bay"
		module = "gun_battery"
		module = "gun_battery"

		building = "target_uplink_computer"
		building = "defense_grid"
		building = "colossus_yards"
		building = "titan_yards"

		effect = {
			while = {
				count = 10
				create_fallen_empire_platform = yes
			}
		}
	}
}

create_hive_fe_citadel = {
	spawn_megastructure = {
		type = "mega_shipyard_ruined"
		owner = event_target:fallen_empire_hive_$FRAGMENT$
		planet = star

		init_effect = {
			create_ambient_object = {
				type = "large_debris_object"
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = prev
					distance = 20
					angle = 20
				}
			}
		}
	}
	create_starbase = {
		size = "starbase_citadel"
		owner = event_target:fallen_empire_hive_$FRAGMENT$

		module = "shipyard"
		module = "anchorage"
		module = "anchorage"
		module = "hangar_bay"
		module = "gun_battery"
		module = "gun_battery"

		building = "growth_chamber"
		building = "command_center"
		building = "target_uplink_computer"
		building = "dark_matter_listening_post"

		effect = {
			while = {
				count = 4
				create_fallen_empire_platform = yes
			}
		}
	}
}