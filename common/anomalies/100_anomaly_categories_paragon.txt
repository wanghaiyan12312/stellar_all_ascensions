############################
### ANOMALY CATEGORIES ###
############################

# The Beholder / Temple of Whispers
paragon_beholder_category = {
	desc = paragon_beholder_category_desc
	picture = GFX_evt_ship_in_orbit_3
	level = 2

	spawn_chance = {
		modifier = {
			add = 3
			has_paragon_dlc = yes
			has_planet_flag = pre_sapient_planet
			NOT = { has_planet_flag = missing_scientist_planet }
		}
		modifier = {
			factor = 0
			has_global_flag = beholder_hire_happend
		}
		modifier = {
			factor = 0
			from.owner = { is_gestalt = yes }
		}
	}

	max_once_global = yes

	on_spawn = {
		prevent_anomaly = yes
		weighted_random_owned_pop_group = {
			limit = {
				is_sapient = no
			}
			species = {
				save_global_event_target_as = beholder_presapients
			}
		}
		every_owned_pop_group = {
			limit = {
				is_sapient = no
			}
			add_psionic_trait = yes
		}
	}

	# add a transfer event 
	on_success = leadershroud.3
}

### Gray ###
disco_gray_cat = {
	desc = "disco_gray_cat_desc"
	picture = "GFX_evt_ship_in_orbit_2"
	level = 3

	## the gray only one empire can get
	max_once_global = yes

	spawn_chance = {
		modifier = {
			add = 6
			is_planet_class = pc_gray_goo
			solar_system = { has_star_flag = lcluster }
		}
		modifier = {
			factor = 0
			OR = {
				has_global_flag = gray_goo_crisis_set
				has_global_flag = dragon_season
				has_global_flag = gray_goo_empire_set
			}
		}
		modifier = {
			factor = 0
			has_global_flag = gray_hire_happend
		}
	}

	# add a transfer event
	on_success = leadershroud.5
}
